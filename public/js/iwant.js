(function(){var t=function(e){return t.get(e)};t.normalize=function(t){return t?"string"==typeof t?{url:t}:t:!1},t.json=function(e){return(e=t.normalize(e))?(e.json=!0,new t.request(e)):void 0},t.get=function(e){return new t.request(e)},t.post=function(e){return(e=t.normalize(e))?(e.method="POST",new t.request(e)):void 0},t.put=function(e){return(e=t.normalize(e))?(e.method="PUT",new t.request(e)):void 0},t.delete=function(e){return(e=t.normalize(e))?(e.method="DELETE",new t.request(e)):void 0},t.request=function(t){if(!t)return!1;if("string"==typeof t&&(t={url:t}),"POST"===t.method||"PUT"===t.method||"DELETE"==t.method){var e="?";for(var r in t.options)e+=t.options.hasOwnProperty(r)?"&"+r+"="+t.options[r]:""}else{t.method="GET",t.url+=t.url.indexOf("?")<0?"?":"";for(var r in t.options)t.url+=t.options.hasOwnProperty(r)?"&"+r+"="+t.options[r]:""}this.xhr=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.xhr.options=t,this.xhr.callbacks={then:[],error:[]},this.then=function(t){return this.xhr.callbacks.then.push(t),this},this.error=function(t){return this.xhr.callbacks.error.push(t),this},this.xhr.call=function(t,e){for(var r=0;r<this.callbacks[t].length;r++)"function"==typeof this.callbacks[t][r]&&this.callbacks[t][r](e)},this.xhr.returnSuccess=function(t){this.call("then",t)},this.xhr.returnError=function(t){this.call("error",t)},this.xhr.onreadystatechange=function(){if(4===this.readyState&&200==this.status){var t=this.responseText;if(this.options.json)try{t=JSON.parse(t)}catch(e){return this.returnError("invalid json"),!1}this.returnSuccess(t)}else 4===this.readyState&&404==this.status?this.returnError("404"):4===this.readyState&&this.returnError("unknow")},this.xhr.open(t.method,t.url,!0),this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.send("undefined"!=typeof e?e:null)};var e=function(t,e){return function(){return t.apply(e,arguments)}};window.iWant=function(){function r(t){this.requestProductData=e(this.requestProductData,this),this.getImageIds=e(this.getImageIds,this);var r,n,o;for(n=0,o=t.length;o>n;n++)r=t[n],this.configuration[r[0]]=r[1];this.getImageIds(),this.requestProductData()}return r.prototype.configuration={},r.host="http://private-552a2-iwant.apiary-mock.com",r.prototype.imageIds=[],r.getResourceURL=function(t,e){var n,o,i,s;if(null==e&&(e={}),n=r.host+t,0===e.length)return n;i="?";for(o in e)s=e[o],i+=encodeURIComponent(o)+"="+encodeURIComponent(s)+"&";return i=i.substring(0,i.length-1),n+i},r.prototype.getImageIds=function(){var t,e,r,n,o,i;for(r=document.querySelectorAll("img[src]"),i=[],n=0,o=r.length;o>n;n++)e=r[n],i.push((t=e.className.match(/wp\-image\-(\d+)/))?t[1]:void 0);return i},r.prototype.requestProductData=function(e){return t.json(r.getResourceURL("/products",{ids:this.imageIds})).then(e)},r}(),window._iwant=new iWant(_iwant),t("/index.html").then(function(){console.log(!0)})}).call(this);
//# sourceMappingURL=./iwant.js.map